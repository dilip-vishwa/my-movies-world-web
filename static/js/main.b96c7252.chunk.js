(this.webpackJsonpmoviesdb=this.webpackJsonpmoviesdb||[]).push([[0],{117:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(12),i=n.n(o),r=(n(117),n(13)),s=n(192),l=n(193),d=n(60),j=n(90),u=n.n(j),h=n(176),b=n(28),p=n(175),m=n(2);var g=function(){return Object(m.jsxs)(d.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(m.jsx)(p.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})},O=n(41),x=n(14),f=n(54),v=n(207),y=n(185),S=n(178),C=n(205),k=n(183),w=n(202),T=n(186),_=n(199),F=n(88),N=n.n(F),I=n(177),D=n(87),M={endpoint:"http://localhost:8000"},B={endpoint:"https://my-movies-world-api.herokuapp.com"},W={endpoint:("production"===(n.n(D).a.env.NODE_ENV1||"production")?B:M).endpoint},z=Object(h.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function E(){var e=function(e){var t=Object(a.useState)(e),n=Object(r.a)(t,2),c=n[0],o=n[1];return{value:c,onChange:function(e){o(e.target.value)}}},t=z(),n=e(""),c=e(""),o=Object(x.f)();return Object(m.jsxs)(I.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(S.a,{}),Object(m.jsxs)("div",{className:t.paper,children:[Object(m.jsx)(v.a,{className:t.avatar,children:Object(m.jsx)(N.a,{})}),Object(m.jsx)(d.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(m.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(m.jsx)(C.a,Object(f.a)({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0},n)),Object(m.jsx)(C.a,Object(f.a)({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"},c)),Object(m.jsx)(k.a,{control:Object(m.jsx)(w.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(m.jsx)(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){e.preventDefault();var t={username:n.value,password:c.value},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch("".concat(W.endpoint,"/users/"),a).then((function(e){return e.json()})).then((function(e){"Success"===e.result&&(o.push("/movies"),window.location.reload(!1)),localStorage.setItem("auth_token",e.auth_token),localStorage.setItem("logged_in","true")}))},children:"Sign In"}),Object(m.jsxs)(T.a,{container:!0,children:[Object(m.jsx)(T.a,{item:!0,xs:!0,children:Object(m.jsx)(p.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(m.jsx)(T.a,{item:!0,children:Object(m.jsx)(p.a,{href:"#",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]}),Object(m.jsx)(_.a,{mt:8,children:Object(m.jsx)(g,{})})]})}var A=n(187),G=n(189),V=n(188),P=n(209),L=n(206),R=n(201);function U(e){return Object(m.jsx)(R.a,Object(f.a)({elevation:6,variant:"filled"},e))}var q=Object(h.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function J(e){var t=q(),n=c.a.useState(e.open||!1),a=Object(r.a)(n,2),o=(a[0],a[1]),i=function(e,t){"clickaway"!==t&&o(!1)};return Object(m.jsx)("div",{className:t.root,children:Object(m.jsx)(L.a,{open:e.open,autoHideDuration:4e3,onClose:i,children:Object(m.jsx)(U,{onClose:i,severity:"success",children:e.message})})})}var H=n(212),Y=n(190),K=n(191),Q=Object(h.a)((function(e){return{icon:{marginRight:e.spacing(2)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)},link:{color:"#FFFFFF",textDecoration:"none"},circle:{borderRadius:"50%",width:"34px",height:"34px",padding:"10px",background:"#538b002e",color:"#000",textAlign:"center",font:"32px Arial, sans-serif"}}}));var X=function(){var e=Object(x.f)(),t=Q(),n=Object(a.useState)(null),c=Object(r.a)(n,2),o=c[0],i=c[1],s=Object(a.useState)(!1),l=Object(r.a)(s,2),j=l[0],u=l[1],h=Object(a.useState)([]),b=Object(r.a)(h,2),g=b[0],O=b[1],f=Object(a.useState)(!1),v=Object(r.a)(f,2),S=(v[0],v[1],Object(a.useState)(!1)),k=Object(r.a)(S,2),w=k[0],_=k[1],F=Object(a.useState)(""),N=Object(r.a)(F,2),D=N[0],M=N[1],B="true"==localStorage.getItem("logged_in"),z=Object(a.useState)(B),E=Object(r.a)(z,2),L=E[0];if(E[1],Object(a.useEffect)((function(){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))}};fetch("".concat(W.endpoint,"/movies?page=1&limit=12"),t).then((function(e){return e.json()})).then((function(t){"Unauthorized"===t.result?e.push("/login"):(u(!0),console.log(t.result),O(t.result))}),(function(e){u(!0),i(e)}))}),[]),o)return Object(m.jsxs)("div",{children:["Error: ",o.message]});if(!j)return Object(m.jsx)("div",{children:"Loading..."});function R(t){var n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))}};fetch("".concat(W.endpoint,"/movies?movie_id=").concat(t),n).then((function(e){return e.json()})).then((function(t){"Unauthorized"===t.result?e.push("/login"):(u(!0),M("Successfully deleted Movie Data. Reloading Movie List"),_(!0),setTimeout((function(){e.push("/movies"),window.location.reload(!1)}),4e3))}),(function(e){u(!0),i(e)}))}return Object(m.jsx)("main",{children:Object(m.jsxs)(I.a,{className:t.cardGrid,maxWidth:"md",children:[Object(m.jsx)(J,{open:w,message:D}),Object(m.jsx)("div",{style:{position:"relative",margin:"auto",float:"left",zIndex:2e3},children:L&&Object(m.jsx)(y.a,{variant:"contained",color:"secondary",children:Object(m.jsx)(p.a,{className:t.link,href:"/movies/create",children:"Add Movies"})})}),Object(m.jsx)("div",{style:{position:"relative",margin:"auto",float:"right",zIndex:2e3},children:Object(m.jsx)(C.a,{id:"standard-basic",label:"Search Movie",onKeyUp:function(t){var n=t.target.value,a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))}};fetch("".concat(W.endpoint,"/movies/?movie_name=").concat(n,"&page=1&limit=12"),a).then((function(e){return e.json()})).then((function(t){"Unauthorized"===t.result?e.push("/login"):(u(!0),O(t.result))}),(function(e){u(!0),i(e)}))}})}),Object(m.jsx)("div",{style:{position:"relative",margin:"auto",textAlign:"center"},children:Object(m.jsxs)("b",{children:["Showing/Found Result: ",g.length||"No Movie with current search"]})}),Object(m.jsxs)(T.a,{container:!0,spacing:4,children:[g.map((function(e){return Object(m.jsx)(T.a,{item:!0,xs:12,sm:6,md:4,children:Object(m.jsxs)(A.a,{className:t.card,children:[Object(m.jsxs)(V.a,{className:t.cardContent,children:[Object(m.jsxs)(d.a,{gutterBottom:!0,variant:"h5",component:"h2",children:[e.name,Object(m.jsx)(H.a,{title:"IMDB Score",children:Object(m.jsx)("span",{className:t.circle,style:{fontSize:"10px",color:"green",fontVariant:"bold",float:"right"},children:e.imdb_score})})]}),Object(m.jsxs)(d.a,{children:[Object(m.jsx)("span",{style:{fontSize:"10px"},children:"By"})," ",Object(m.jsx)("span",{style:{fontStyle:"italic"},children:e.director}),Object(m.jsx)(H.a,{title:"Popularity",children:Object(m.jsx)("span",{className:t.circle,style:{fontSize:"10px",color:"red",fontVariant:"bold",float:"right"},children:e.popularity})})]}),Object(m.jsx)(d.a,{children:e.genre.map((function(e,t){return[t>0&&" ",Object(m.jsx)(P.a,{size:"small",label:e,component:"a",href:"#chip"},t)]}))})]}),Object(m.jsxs)(G.a,{children:[L&&Object(m.jsx)(y.a,{color:"primary",children:Object(m.jsx)(p.a,{href:"/movies/"+e.movie_id,children:Object(m.jsx)(Y.a,{color:"primary",fontSize:"small"})})}),L&&Object(m.jsx)(ge,{button_text:Object(m.jsx)(K.a,{color:"error",fontSize:"small"}),id:e.movie_id,customFunction:R,title:"Are you sure?",message:"This will delete the movie"})]})]})},e.movie_id)})),0!==g.length&&Object(m.jsx)("div",{style:{position:"relative",margin:"auto"},children:L&&Object(m.jsx)(y.a,{variant:"contained",color:"primary",children:"fetch More Movies (Not implemented)"})})]})]})})};function Z(){return Object(m.jsx)(X,{})}var $=function(){var e=Object(x.f)();return localStorage.removeItem("auth_token"),localStorage.removeItem("logged_in"),e.push("/"),window.location.reload(!1),Object(m.jsx)(Z,{})},ee=(n(4),n(179)),te=n(208),ne=n(210),ae=n(200),ce=Object(h.a)((function(e){return{icon:{marginRight:e.spacing(2)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)},formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}})),oe=function(e){var t=Object(a.useState)(e),n=Object(r.a)(t,2),c=n[0],o=n[1];return{value:c,onChange:function(e){o(e.target.value)},setValue:o}};function ie(){var e=Object(x.g)().movie_id,t=ce(),n=Object(x.f)(),c=Object(a.useState)("create"),o=Object(r.a)(c,2),i=o[0],s=o[1],l=Object(a.useState)(null),j=Object(r.a)(l,2),u=(j[0],j[1]),h=Object(a.useState)(!1),b=Object(r.a)(h,2),p=(b[0],b[1]),g=Object(a.useState)([]),O=Object(r.a)(g,2),f=O[0],v=O[1],S=Object(a.useState)([]),k=Object(r.a)(S,2),w=k[0],_=k[1],F=oe(""),N=oe(""),D=oe(""),M=oe(""),B=Object(a.useState)(!1),z=Object(r.a)(B,2),E=z[0],A=z[1],G=Object(a.useState)(""),V=Object(r.a)(G,2),L=V[0],R=V[1],U={PaperProps:{style:{maxHeight:224,width:250}}};return Object(a.useEffect)((function(){e&&s("update"),void 0===e&&s("create");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))}};fetch("".concat(W.endpoint,"/movies/genre"),t).then((function(e){return e.json()})).then((function(e){p(!0),v(e.result)}),(function(e){p(!0),u(e)})),void 0!==e&&fetch("".concat(W.endpoint,"/movies/?movie_id=").concat(e),t).then((function(e){return e.json()})).then((function(e){p(!0),e=e.result,F.setValue(e.name),D.setValue(e.imdb_score),M.setValue(e.popularity),_(e.genre),N.setValue(e.director)}),(function(e){p(!0),u(e)}))}),[]),Object(m.jsxs)(I.a,{className:t.cardGrid,maxWidth:"md",children:[Object(m.jsx)(J,{open:E,message:L}),Object(m.jsx)(d.a,{variant:"h6",gutterBottom:!0,children:"Movie Information"}),Object(m.jsxs)(T.a,{container:!0,spacing:4,children:[Object(m.jsx)(T.a,{item:!0,xs:12,sm:12,children:Object(m.jsx)(C.a,{required:!0,id:"name",name:"name",label:"Movie Name",fullWidth:!0,value:F.value,onChange:F.onChange})}),Object(m.jsx)(T.a,{item:!0,xs:6,sm:6,children:Object(m.jsx)(C.a,{required:!0,id:"popularity",name:"popularity",label:"Popularity",fullWidth:!0,value:M.value,onChange:M.onChange})}),Object(m.jsx)(T.a,{item:!0,xs:6,sm:6,children:Object(m.jsx)(C.a,{required:!0,id:"director",name:"director",label:"Director",fullWidth:!0,value:N.value,onChange:N.onChange})}),Object(m.jsxs)(T.a,{item:!0,xs:6,sm:6,children:[Object(m.jsx)(te.a,{id:"genre",children:"Genre*"}),Object(m.jsx)(ae.a,{fullWidth:!0,labelId:"genre",id:"genre",multiple:!0,value:w,onChange:function(e){_(e.target.value)},input:Object(m.jsx)(ee.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(m.jsx)("div",{className:t.chips,children:e.map((function(e){return Object(m.jsx)(P.a,{label:e,className:t.chip},e)}))})},MenuProps:U,children:f.map((function(e){return Object(m.jsx)(ne.a,{value:e,children:e},e)}))})]}),Object(m.jsx)(T.a,{item:!0,xs:6,sm:6,children:Object(m.jsx)(C.a,{required:!0,id:"imdb_score",name:"imdb_score",label:"Imdb Score",fullWidth:!0,value:D.value,onChange:D.onChange})}),Object(m.jsxs)(y.a,{type:"submit",variant:"contained",color:"secondary",onClick:function(t){t.preventDefault();var a={name:F.value,imdb_score:D.value,popularity:M.value,genre:w,director:N.value},c={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))},body:JSON.stringify(a)},o="".concat(W.endpoint,"/movies");c.method="POST","update"===i&&(o="".concat(W.endpoint,"/movies?movie_id=").concat(e),c.method="PUT"),fetch(o,c).then((function(e){return e.json()})).then((function(e){p(!0),R("Successfully ".concat(i,"d Movie Data. Reloading Movie List")),A(!0),setTimeout((function(){n.push("/movies")}),5e3)}),(function(e){p(!0),u(e)}))},children:["create"===i?"Create":"Update"," Movie"]})]})]})}var re=n(204),se=n(198),le=n(196),de=n(197),je=n(195),ue=n(194),he=Object(h.a)((function(e){return{icon:{marginRight:e.spacing(2)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)}}}));function be(e){var t=he(),n=Object(a.useState)(!1),c=Object(r.a)(n,2),o=c[0],i=(c[1],Object(a.useState)("")),j=Object(r.a)(i,2),h=j[0],b=(j[1],Object(m.jsx)(O.b,{to:"login",style:{color:"#FFFFFF",textDecoration:"none",float:"right"},children:"Login"}));return"true"===e.loggedIn&&(b=Object(m.jsx)(O.b,{to:"logout",style:{color:"#FFFFFF",textDecoration:"none",float:"right"},children:"Logout"})),Object(m.jsxs)(s.a,{position:"relative",children:[Object(m.jsx)(J,{open:o,message:h}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(u.a,{className:t.icon}),Object(m.jsx)(d.a,{variant:"h6",color:"inherit",noWrap:!0,style:{width:"100%"},children:"Movies List"}),Object(m.jsx)(d.a,{variant:"h6",color:"inherit",noWrap:!0,style:{width:"100%",color:"white"},children:b})]})]})}function pe(){var e=he();return Object(m.jsxs)("footer",{className:e.footer,children:[Object(m.jsx)(d.a,{variant:"h6",align:"center",gutterBottom:!0,children:"Footer"}),Object(m.jsx)(d.a,{variant:"subtitle1",align:"center",color:"textSecondary",component:"p",children:"Something here to give the footer a purpose!"}),Object(m.jsx)(g,{})]})}function me(){var e=Object(a.useState)("false"),t=Object(r.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){var e=localStorage.getItem("logged_in")||"false";o(e)}),[]),Object(m.jsx)(O.a,{children:Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsx)(S.a,{}),Object(m.jsx)(be,{loggedIn:n}),Object(m.jsxs)(x.c,{children:[Object(m.jsx)(x.a,{path:"/login",children:Object(m.jsx)(E,{})}),Object(m.jsx)(x.a,{path:"/logout",children:Object(m.jsx)($,{})}),Object(m.jsx)(x.a,{path:"/movies/create",child:Object(m.jsx)(ie,{}),children:Object(m.jsx)(ie,{})}),Object(m.jsx)(x.a,{path:"/movies/:movie_id",child:Object(m.jsx)(ie,{}),children:Object(m.jsx)(ie,{})}),Object(m.jsx)(x.a,{path:"/movies",children:Object(m.jsx)(Z,{})}),Object(m.jsx)(x.a,{path:"/",children:Object(m.jsx)(Z,{})})]}),Object(m.jsx)(pe,{})]})})}function ge(e){var t=c.a.useState(!1),n=Object(r.a)(t,2),a=n[0],o=n[1],i=c.a.useState(!1),s=Object(r.a)(i,2),l=s[0],d=s[1],j=Object(b.a)(),u=Object(ue.a)(j.breakpoints.down("sm")),h=function(){o(!1)};return Object(m.jsxs)("div",{children:[Object(m.jsx)(y.a,{color:"primary",onClick:function(){!function(e){o(!0),d(e)}(e.id)},children:e.button_text}),Object(m.jsxs)(re.a,{fullScreen:u,open:a,onClose:h,"aria-labelledby":"responsive-dialog-title",children:[Object(m.jsx)(je.a,{id:"responsive-dialog-title",children:e.title}),Object(m.jsx)(le.a,{children:Object(m.jsx)(de.a,{children:e.message})}),Object(m.jsxs)(se.a,{children:[Object(m.jsx)(y.a,{autoFocus:!0,onClick:h,color:"primary",children:"Disagree"}),Object(m.jsx)(y.a,{onClick:function(){o(!1),e.customFunction(l)},color:"primary",autoFocus:!0,children:"Agree"})]})]})]})}i.a.render(Object(m.jsx)(me,{}),document.getElementById("root"))}},[[128,1,2]]]);
//# sourceMappingURL=main.b96c7252.chunk.js.map